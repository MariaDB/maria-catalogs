--source include/have_rocksdb.inc
--disable_warnings
DROP TABLE IF EXISTS t;
--enable_warnings
CREATE TABLE t(id int primary key) engine=rocksdb;
INSERT INTO t values (1), (2), (3); 
--error ER_TABLE_EXISTS_ERROR 
CREATE TABLE t(id int primary key) engine=rocksdb;
FLUSH TABLES;
move_file $MARIADB_DATADIR/test/t.frm $MARIADB_DATADIR/test/t.frm.tmp;
--replace_regex /Table '.*' does/Table 'test.t' does/ /if '.*' exists/if '.\/test\/t.frm' exists/
--error ER_METADATA_INCONSISTENCY
CREATE TABLE t(id int primary key) engine=rocksdb;
move_file $MARIADB_DATADIR/test/t.frm.tmp $MARIADB_DATADIR/test/t.frm;
FLUSH TABLES;
SELECT * FROM t;
DROP TABLE t;
